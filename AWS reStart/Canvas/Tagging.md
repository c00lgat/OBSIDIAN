![[Pasted image 20231126110907.png]]
In this lesson, you will learn how to manage resource consumption in an AWS account by using tags. You will also review examples of common tagging use cases that use AWS Config and AWS Identity and Access Management (IAM).
Specifically, you will learn how to:
- Explain the purpose and function of tagging in AWS. 
- Describe the cost management strategies associated with tagging.
- Enforce tagging by using AWS Identity and Access Management (IAM) policies.

Tagging Q&A:
https://www.youtube.com/watch?v=DAzL8EUrdUo

`A tag:`
- Is a key-value pair that can be attached to an AWS resource
- Enables you to identify and categorize resources
![[Pasted image 20231126111221.png]]

A tag is a label that you assign to an AWS resource. It enables you to identify it or categorize it in a meaningful way. A tag consists of a key and a value, both of which you define.

For example, if you have two Amazon Elastic Compute Cloud (Amazon EC2) instances in a development environment, you might assign a tag to both instances with a key of Name (essentially, a name tag). You could then assign a value to each key, such as CommandHost for the first instance and DatabaseServer for the second instance. With these tags, you could quickly identify each instance and their purpose, which would be more difficult if you used only their instance IDs. In addition, if you created similar instances in another environment—such as Test—you could assign another tag to each instance with a key of Environment. You could then assign a value of Development or Test to each instance so that you could distinguish between them and categorize them by environment.

This situation is illustrated in the diagram. In the two virtual private clouds (VPCs) on the left, the EC2 instances do not have tags. It would not be easy to identify their purpose or which environment—Development or Test—they are running in. In contrast, the instances in the two VPCs on the right have both a Name tag and an Environment tag. You can clearly determine their purpose and running environment.

###### Tag characteristics
![[Pasted image 20231126112332.png]]
Tags have a number of important characteristics, which include:
- You can only assign a tag to a resource after it has been created.

- Tag keys and values are case-sensitive. A best practice is to use a consistent and standardized format.
  
- You cannot edit or delete tag keys or values with the `aws:` prefix. These tags are assigned by AWS and are reserved for AWS use. For example, the `aws:createdBy` tag is automatically generated by AWS for cost allocation purposes. It is assigned to a resource to identify its creator. Another example of a generated tag is the `aws:cloudformation:<stack-name>` tag, which AWS CloudFormation automatically assigns to every stack to identify its name.
  
- Tags are sometimes inherited or propagated. Some services, such as AWS CloudFormation, and AWS Elastic Beanstalk can create other resources, such as Amazon Relational Database (Amazon RDS) instances or EC2 instances. Generally, when one of these services creates a resource, it will tag that resource with a reference to itself. For example, a resource that is created as part of an AWS CloudFormation stack automatically inherits the stack’s `aws:cloudformation:<stack-name>` tag.
  
- You can create up to 50 tags for each resource. Tags with the `aws:` prefix do not count towards this number.

###### Examples of common tags
- Environment (production/test)
- Application
- Owner
- Department
- Cost center
- Purpose
- Stack
![[Pasted image 20231126113033.png]]

Tags should represent organizationally relevant dimensions. This slide lists some examples of meaningful tags because they support the ability to manage resource inventory, access control, cost tracking, automation, and organization.

###### AWS Config and tagging
`AWS Config provides a mechanism to enforce tagging on a resource:`
- Use the `required-tags` manages rule.
- Specify the required tag key (and optionally the required value)
- Evaluates rules and identifies non-compliant resources
![[Pasted image 20231126113213.png]]

AWS Config provides AWS managed rules, which are predefined, customizable rules that AWS Config uses to evaluate whether your AWS resources comply with common best practices. You can customize the behavior of a managed rule to suit your needs. For example, you could use the required-tags managed rule to quickly assess whether a specific tag is applied to your resources. This rule enables you to specify the key of the required tag and, optionally, its value. After you activate the rule, AWS Config compares your resources to the defined conditions and reports any non-compliant resources. The evaluation of a managed rule can occur when a resource changes, or on a periodic basis.
https://docs.aws.amazon.com/config/latest/developerguide/required-tags.html


###### Tagging in AWS CLI
- Create a tag:
``` bash
export TIMESTAMP=`date`

aws ec2 create-tags --resources i-1234567890abdef0 --tags "Key=SecurityCheck,Value=$TIMESTAMP"
```

- Query and filter based on a tag:
``` bash
aws ec2 describe-instance
```
